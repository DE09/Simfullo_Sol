<!DOCTYPE html>
<html lang="en">
{% include 'base/head.html' %}

<body>
    에어 페이지임
    <input type="text" placeholder="origin" class="origin">
    <input type="text" placeholder="dest" class="dest">
    <input type="text" placeholder="consol" class="consol">
    <input type="text" placeholder="line" class="line">
    <select class="cur">
        <option value="USD">USD</option>
        <option value="KRW">KRW</option>
    </select>
    <input type="text" class="minimum" placeholder="minimum">
    <input type="text" class="normal" placeholder="normal">
    <input type="text" class="over45" placeholder="45+">
    <input type="text" class="over100" placeholder="100+">
    <input type="text" class="over300" placeholder="300+">
    <input type="text" class="over500" placeholder="500+">
    <input type="text" class="over1000" placeholder="1000+">
    <input type="text" class="fsc" placeholder="fsc">
    <input type="text" class="skdl" placeholder="skdl">
    <input type="text" class="via" placeholder="via">

    <button class="save">저장</button>

    <table>
        <thead>
            <tr>
                <td>origin</td>
                <td>dest</td>
                <td>consol</td>
                <td>line</td>
                <td>cur</td>
                <td>M</td>
                <td>N</td>
                <td>+45</td>
                <td>+100</td>
                <td>+300</td>
                <td>+500</td>
                <td>+1000</td>
                <td>fsc</td>
                <td>skdl</td>
                <td>via</td>
            </tr>
        </thead>
        <tbody class="tbody">
            {% for i in info %}
            <tr class="tr{{i.id}}">
                <td><input type="text" value="{{i.origin}}" class="origin{{i.id}}" disabled></td>
                <td><input type="text" value="{{i.dest}}" class="dest{{i.id}}" disabled></td>
                <td><input type="text" value="{{i.consol}}" class="consol{{i.id}}" disabled></td>
                <td><input type="text" value="{{i.line}}" class="line{{i.id}}" disabled></td>
                <td>
                    <select id="cur" class="cur{{i.id}}" disabled>
                        <option value="{{i.cur}}">{{i.cur}}</option>
                        <option value="==">==</option>
                        <option value="USD">USD</option>
                        <option value="KRW">KRW</option>
                    </select>
                </td>
                <td>
                    <input type="text" value="{{i.minimum}}" class="minimum{{i.id}}" disabled />
                </td>
                <td>
                    <input type="text" value="{{i.normal}}" class="normal{{i.id}}" disabled />
                </td>
                <td>
                    <input type="text" value="{{i.over45}}" class="over45{{i.id}}" disabled />
                </td>
                <td>
                    <input type="text" value="{{i.over100}}" class="over100{{i.id}}" disabled />
                </td>
                <td>
                    <input type="text" value="{{i.over300}}" class="over300{{i.id}}" disabled />
                </td>
                <td>
                    <input type="text" value="{{i.over500}}" class="over500{{i.id}}" disabled />
                </td>
                <td>
                    <input type="text" value="{{i.over1000}}" class="over1000{{i.id}}" disabled />
                </td>
                <td>
                    <input type="text" value="{{i.fsc}}" class="fsc{{i.id}}" disabled>
                </td>
                <td>
                    <input type="text" value="{{i.skdl}}" class="skdl{{i.id}}" disabled>
                </td>
                <td>
                    <input type="text" value="{{i.via}}" class="via{{i.id}}" disabled>
                </td>
                <td>
                    <button id="{{i.id}}" class="editbtn{{i.id}}" onclick="editbtn(this.id)">수정</button>
                    <button style="display: none" id="{{i.id}}" class="updatebtn{{i.id}}" onclick="updaterate(this.id)"
                        data-bs-toggle="modal" data-bs-target="#updateModal{{i.id}}">저장</button>
                    <div class="modal fade" id="updateModal{{i.id}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">변경사항이 저장되었습니다.</div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="{{i.id}}" class="deletebtn{{i.id}}" type="button" class="btn btn-primary"
                        data-bs-toggle="modal" data-bs-target="#deleteModal{{i.id}}">
                        삭제
                    </button>
                    <div class="modal fade" id="deleteModal{{i.id}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">정말 삭제하시겠습니까?</div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                    <button type="button" id="{{i.id}}" class="btn btn-danger"
                                        onclick="deleterate(this.id)" data-bs-dismiss="modal">삭제하기</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button style="display: none" id="{{i.id}}" class="cancelbtn{{i.id}}"
                        onclick="cancel(this.id)">취소</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    AIR OTHER
<br>
    <input type="text" placeholder="origin" class="airother_origin" />
    <input type="text" placeholder="dest" class="airother_dest" />
    <input type="text" placeholder="line" class="airother_line" />
    <input type="text" placeholder="name" class="airother_name" />

    <select id="cur" class="airother_cur">
        <option value="USD">USD</option>
        <option value="KRW">KRW</option>
    </select>
    <input type="text" placeholder="rate" class="airother_rate" />
    <select id="unit" class="airother_unit">
        <option value="AWB">AWB</option>
        <option value="KG">KG</option>
    </select>
    <select id="chargeat" class="airother_chargeAt">
        <option value="origin">origin</option>
        <option value="freight">freight</option>
        <option value="destination">destination</option>
    </select>
    <button class="airother_save">저장</button>

    <table>
        <thead>
            <tr>
                <td>origin</td>
                <td>dest</td>
                <td>consol</td>
                <td>line</td>
                <td>cur</td>
                <td>rate</td>
                <td>unit</td>
                <td>chargeAt</td>
            </tr>
        </thead>
        <tbody class="airother_tbody">
            {% for i in airotherinfo %}
            <tr class="airother_tr{{i.id}}">
                <td><input type="text" value="{{i.origin}}" class="airother_origin{{i.id}}" disabled /></td>
                <td><input type="text" value="{{i.dest}}" class="airother_dest{{i.id}}" disabled /></td>
                <td><input type="text" value="{{i.line}}" class="airother_line{{i.id}}" disabled /></td>
                <td><input type="text" value="{{i.name}}" class="airother_name{{i.id}}" disabled /></td>
                <td>
                    <select id="cur" class="airother_cur{{i.id}}" disabled>
                        <option value="{{i.cur}}">{{i.cur}}</option>
                        <option value="====">====</option>
                        <option value="USD">USD</option>
                        <option value="KRW">KRW</option>
                    </select>
                </td>
                <td><input type="text" value="{{i.rate}}" class="airother_rate{{i.id}}" disabled /></td>
                <td>
                    <select id="unit" class="airother_unit{{i.id}}" disabled>
                        <option value="{{i.unit}}">{{i.unit}}</option>
                        <option value="====">====</option>
                        <option value="AWB">AWB</option>
                        <option value="KG">KG</option>
                    </select>
                </td>
                <td>
                    <select id="" class="airother_chargeAt{{i.id}}" disabled>
                        <option value="{{i.chargeAt}}">{{i.chargeAt}}</option>
                        <option value="====">====</option>
                        <option value="origin">origin</option>
                        <option value="freight">freight</option>
                        <option value="destination">destination</option>
                    </select>
                </td>
                <td>
                    <button id="{{i.id}}" class="airother_editbtn{{i.id}}"
                        onclick="airother_editbtn(this.id)">수정</button>
                    <button style="display: none" id="{{i.id}}" class="airother_updatebtn{{i.id}}"
                        onclick="airother_updaterate(this.id)" data-bs-toggle="modal"
                        data-bs-target="#updateModal{{i.id}}">저장</button>
                    <div class="modal fade" id="updateModal{{i.id}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">변경사항이 저장되었습니다.</div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="{{i.id}}" class="airother_deletebtn{{i.id}}" type="button" class="btn btn-primary"
                        data-bs-toggle="modal" data-bs-target="#deleteModal{{i.id}}">
                        삭제
                    </button>
                    <div class="modal fade" id="deleteModal{{i.id}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">정말 삭제하시겠습니까?</div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                    <button type="button" id="{{i.id}}" class="btn btn-danger"
                                        onclick="airother_deleterate(this.id)" data-bs-dismiss="modal">삭제하기</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button style="display: none" id="{{i.id}}" class="airother_cancelbtn{{i.id}}"
                        onclick="airother_cancel(this.id)">취소</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% include 'base/footer.html' %}

    <script>
        $('.save').on('click', function () {
            param = {
                origin: $('.origin').val(),
                dest: $('.dest').val(),
                consol: $('.consol').val(),
                line: $('.line').val(),
                cur: $('.cur').val(),
                minimum: $('.minimum').val(),
                normal: $('.normal').val(),
                over45: $('.over45').val(),
                over100: $('.over100').val(),
                over300: $('.over300').val(),
                over500: $('.over500').val(),
                over1000: $('.over1000').val(),
                fsc: $('.fsc').val(),
                skdl: $('.skdl').val(),
                via: $('.via').val(),
            }

            var origin = $('.origin').val()
            var dest = $('.dest').val()
            var consol = $('.consol').val()
            var line = $('.line').val()
            var cur = $('.cur').val()
            var minimum = $('.minimum').val()
            var normal = $('.normal').val()
            var over45 = $('.over45').val()
            var over100 = $('.over100').val()
            var over300 = $('.over300').val()
            var over500 = $('.over500').val()
            var over1000 = $('.over1000').val()
            var fsc = $('.fsc').val()
            var skdl = $('.skdl').val()
            var via = $('.via').val()


            $.ajax({
                type: "POST",
                url: "{% url 'airadd' %}",
                data: JSON.stringify(param),
                success: function (data) {
                    var id = JSON.stringify(data.id);
                    var appendrow = `<tr class="tr${id}">
                                <td>${id}</td>
                                <td>${origin}</td>
                                <td>${dest}</td>
                                <td>${consol}</td>
                                <td>${line}</td>
                                <td>${cur}</td>
                                <td>${minimum}</td>
                                <td>${normal}</td>
                                <td>${over45}</td>
                                <td>${over100}</td>
                                <td>${over300}</td>
                                <td>${over500}</td>
                                <td>}${over1000}</td>
                                <td>}${fsc}</td>
                                <td>}${skdl}</td>
                                <td>}${via}</td>
                                <td><button>수정</button><button id="${id}" onclick="deleterate(this.id)">삭제</button></td>
                                </tr>
                            `;
                    $(".tbody").append(appendrow);
                },
            });
        })


        function editbtn(id) {
            $(".updatebtn" + id).css("display", "");
            $(".cancelbtn" + id).css("display", "");
            $(".deletebtn" + id).css("display", "none");
            $(".editbtn" + id).css("display", "none");
            $(".origin" + id).removeAttr("disabled");
            $(".dest" + id).removeAttr("disabled");
            $(".consol" + id).removeAttr("disabled");
            $(".line" + id).removeAttr("disabled");
            $(".cur" + id).removeAttr("disabled");
            $(".minimum" + id).removeAttr("disabled");
            $(".normal" + id).removeAttr("disabled");
            $(".over45" + id).removeAttr("disabled");
            $(".over100" + id).removeAttr("disabled");
            $(".over300" + id).removeAttr("disabled");
            $(".over500" + id).removeAttr("disabled");
            $(".over1000" + id).removeAttr("disabled");
            $(".fsc" + id).removeAttr("disabled");
            $(".skdl" + id).removeAttr("disabled");
            $(".via" + id).removeAttr("disabled");
            $(".tr" + id).css("background-color", "yellow")
        }

        function cancel(id) {
            $(".updatebtn" + id).css("display", "none");
            $(".cancelbtn" + id).css("display", "none");
            $(".deletebtn" + id).css("display", "");
            $(".editbtn" + id).css("display", "");
            $(".origin" + id).attr("disabled", true);
            $(".dest" + id).attr("disabled", true);
            $(".consol" + id).attr("disabled", true);
            $(".line" + id).attr("disabled", true);
            $(".cur" + id).attr("disabled", true);
            $(".minimum" + id).attr("disabled", true);
            $(".normal" + id).attr("disabled", true);
            $(".over45" + id).attr("disabled", true);
            $(".over100" + id).attr("disabled", true);
            $(".over300" + id).attr("disabled", true);
            $(".over500" + id).attr("disabled", true);
            $(".over1000" + id).attr("disabled", true);
            $(".fsc" + id).attr("disabled", true);
            $(".skdl" + id).attr("disabled", true);
            $(".via" + id).attr("disabled", true);
            $(".tr" + id).css("background-color", "")
        }


        function updaterate(id) {
            param = {
                id: id,
                consol: $('.consol' + id).val(),
                line: $('.line' + id).val(),
                cur: $('.cur' + id).val(),
                minimum: $('.minimum' + id).val(),
                normal: $('.normal' + id).val(),
                over45: $('.over45' + id).val(),
                over100: $('.over100' + id).val(),
                over300: $('.over300' + id).val(),
                over500: $('.over500' + id).val(),
                over1000: $('.over1000' + id).val(),
                fsc: $('.fsc' + id).val(),
                skdl: $('.skdl' + id).val(),
                via: $('.via' + id).val(),
            }
            $.ajax({
                type: "POST",
                url: "{% url 'airupdate' %}",
                data: JSON.stringify(param),
                success: function () {
                    $(".updatebtn" + id).css("display", "none");
                    $(".cancelbtn" + id).css("display", "none");
                    $(".deletebtn" + id).css("display", "");
                    $(".editbtn" + id).css("display", "");
                    $(".origin" + id).attr("disabled", true);
                    $(".dest" + id).attr("disabled", true);
                    $(".consol" + id).attr("disabled", true);
                    $(".line" + id).attr("disabled", true);
                    $(".cur" + id).attr("disabled", true);
                    $(".minimum" + id).attr("disabled", true);
                    $(".normal" + id).attr("disabled", true);
                    $(".over45" + id).attr("disabled", true);
                    $(".over100" + id).attr("disabled", true);
                    $(".over300" + id).attr("disabled", true);
                    $(".over500" + id).attr("disabled", true);
                    $(".over1000" + id).attr("disabled", true);
                    $(".fsc" + id).attr("disabled", true);
                    $(".skdl" + id).attr("disabled", true);
                    $(".via" + id).attr("disabled", true);
                    $(".tr" + id).css("background-color", "")
                },
            });

        }


        function deleterate(id) {
            param = {
                id: id,
            };

            $.ajax({
                type: "POST",
                url: "{% url 'airdelete' %}",
                data: JSON.stringify(param),
                success: function () {
                    $(".tr" + id).remove();
                },
            });
        }

    </script>
    <script>
        $('.airother_save').on('click', function () {
            param = {
                airother_origin: $('.airother_origin').val(),
                airother_dest: $('.airother_dest').val(),
                airother_line: $('.airother_line').val(),
                airother_name: $('.airother_name').val(),
                airother_cur: $('.airother_cur').val(),
                airother_rate: $('.airother_rate').val(),
                airother_unit: $('.airother_unit').val(),
                airother_chargeAt: $('.airother_chargeAt').val(),
            }

            var airother_origin = $('.airother_origin').val()
            var airother_dest = $('.airother_dest').val()
            var airother_line = $('.airother_line').val()
            var airother_name = $('.airother_name').val()
            var airother_cur = $('.airother_cur').val()
            var airother_rate = $('.airother_rate').val()
            var airother_unit = $('.airother_unit').val()
            var airother_chargeAt = $('.airother_chargeAt').val()

            $.ajax({
                type: "POST",
                url: "{% url 'airotheradd' %}",
                data: JSON.stringify(param),
                success: function (data) {
                    var id = JSON.stringify(data.id);
                    var appendrow = `<tr class="airother_tr${id}">
                                <td>${id}</td>
                                <td>${airother_origin}</td>
                                <td>${airother_dest}</td>
                                <td>${airother_line}</td>
                                <td>${airother_name}</td>
                                <td>${airother_cur}</td>
                                <td>${airother_rate}</td>
                                <td>${airother_unit}</td>
                                <td>${airother_chargeAt}</td>
                                <td><button>수정</button><button id="${id}" onclick="airother_deleterate(this.id)">삭제</button></td>
                                </tr>
                            `;
                    $(".airother_tbody").append(appendrow);
                },
            });
        })

        function airother_editbtn(id) {
            $(".airother_updatebtn" + id).css("display", "");
            $(".airother_cancelbtn" + id).css("display", "");
            $(".airother_deletebtn" + id).css("display", "none");
            $(".airother_editbtn" + id).css("display", "none");
            $(".airother_origin" + id).removeAttr("disabled");
            $(".airother_dest" + id).removeAttr("disabled");
            $(".airother_line" + id).removeAttr("disabled");
            $(".airother_name" + id).removeAttr("disabled");
            $(".airother_cur" + id).removeAttr("disabled");
            $(".airother_rate" + id).removeAttr("disabled");
            $(".airother_unit" + id).removeAttr("disabled");
            $(".airother_chargeAt" + id).removeAttr("disabled");
            $(".airother_tr" + id).css("background-color", "yellow")
        }

        function airother_cancel(id) {
            $(".airother_updatebtn" + id).css("display", "none");
            $(".airother_cancelbtn" + id).css("display", "none");
            $(".airother_deletebtn" + id).css("display", "");
            $(".airother_editbtn" + id).css("display", "");
            $(".airother_origin" + id).attr("disabled", true);
            $(".airother_dest" + id).attr("disabled", true);
            $(".airother_line" + id).attr("disabled", true);
            $(".airother_name" + id).attr("disabled", true);
            $(".airother_cur" + id).attr("disabled", true);
            $(".airother_rate" + id).attr("disabled", true);
            $(".airother_unit" + id).attr("disabled", true);
            $(".airother_chargeAt" + id).attr("disabled", true);
            $(".airother_tr" + id).css("background-color", "")
        }

        function airother_updaterate(id) {
            param = {
                id: id,
                line: $('.airother_line' + id).val(),
                name: $('.airother_name' + id).val(),
                cur: $('.airother_cur' + id).val(),
                rate: $('.airother_rate' + id).val(),
                unit: $('.airother_unit' + id).val(),
                chargeAt: $('.airother_chargeAt' + id).val(),
            }

            $.ajax({
                type: "POST",
                url: "{% url 'airotherupdate' %}",
                data: JSON.stringify(param),
                success: function () {
                    $(".airother_updatebtn" + id).css("display", "none");
                    $(".airother_cancelbtn" + id).css("display", "none");
                    $(".airother_deletebtn" + id).css("display", "");
                    $(".airother_editbtn" + id).css("display", "");
                    $(".airother_origin" + id).attr("disabled", true);
                    $(".airother_dest" + id).attr("disabled", true);
                    $(".airother_line" + id).attr("disabled", true);
                    $(".airother_name" + id).attr("disabled", true);
                    $(".airother_cur" + id).attr("disabled", true);
                    $(".airother_rate" + id).attr("disabled", true);
                    $(".airother_unit" + id).attr("disabled", true);
                    $(".airother_chargeAt" + id).attr("disabled", true);
                    $(".airother_tr" + id).css("background-color", "")
                },
            });

        }

        function airother_deleterate(id) {
            param = {
                id: id,
            };

            $.ajax({
                type: "POST",
                url: "{% url 'airotherdelete' %}",
                data: JSON.stringify(param),
                success: function () {
                    $(".airother_tr" + id).remove();
                },
            });
        }


    </script>

</body>

</html>